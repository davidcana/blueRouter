(function(){
function $JSCompiler_StaticMethods_init$$($JSCompiler_StaticMethods_init$self$$){$JSCompiler_StaticMethods_init$self$$.$g$=$JSCompiler_StaticMethods_createRoutesMap$$($JSCompiler_StaticMethods_init$self$$);$JSCompiler_StaticMethods_init$self$$.stack=[];$JSCompiler_StaticMethods_addEventListenersForWindow$$($JSCompiler_StaticMethods_init$self$$);$JSCompiler_StaticMethods_navigateUrl$$($JSCompiler_StaticMethods_init$self$$,$JSCompiler_StaticMethods_init$self$$.options.$updateOnLoad$?window.location.href:
"",$JSCompiler_StaticMethods_init$self$$.options.$animateTransitionsOnLoad$)}
function $JSCompiler_StaticMethods_checkOptions$$($JSCompiler_StaticMethods_checkOptions$self_message$jscomp$inline_2$$){let $errors$jscomp$1$$=0,$errorMessages$$="";$JSCompiler_StaticMethods_checkOptions$self_message$jscomp$inline_2$$.options.$routes$||(++$errors$jscomp$1$$,$errorMessages$$+="routes must be defined. ");$JSCompiler_StaticMethods_checkOptions$self_message$jscomp$inline_2$$.options.$eventsByPage$||(++$errors$jscomp$1$$,$errorMessages$$+="eventsByPage must be defined. ");if($errors$jscomp$1$$)throw $JSCompiler_StaticMethods_checkOptions$self_message$jscomp$inline_2$$=
"Unable to initalize Blue router. "+$errors$jscomp$1$$+" errors found: "+$errorMessages$$,alert($JSCompiler_StaticMethods_checkOptions$self_message$jscomp$inline_2$$),$JSCompiler_StaticMethods_checkOptions$self_message$jscomp$inline_2$$;}
function $JSCompiler_StaticMethods_addEventListenersForWindow$$($JSCompiler_StaticMethods_addEventListenersForWindow$self$$){window.onpopstate=()=>{$JSCompiler_StaticMethods_navigateUrl$$($JSCompiler_StaticMethods_addEventListenersForWindow$self$$,window.location.href,!0)}}
function $JSCompiler_StaticMethods_addEventListenersForLinks$$($JSCompiler_StaticMethods_addEventListenersForLinks$self$$,$pageId$$){$blueRouter$utils$addEventListenerOnList$$(document.getElementById($pageId$$).getElementsByTagName("a"),$e$jscomp$8$$=>{const $href$$=$e$jscomp$8$$.target.getAttribute("href");$href$$.startsWith($JSCompiler_StaticMethods_addEventListenersForLinks$self$$.options.$PAGE_PREFIX$)&&($e$jscomp$8$$.preventDefault(),history.pushState({page:$href$$},"page "+$href$$,"#"+$href$$),
$JSCompiler_StaticMethods_navigateUrl$$($JSCompiler_StaticMethods_addEventListenersForLinks$self$$,$href$$,!0))})}function $JSCompiler_StaticMethods_createRoutesMap$$($JSCompiler_StaticMethods_createRoutesMap$self$$){const $routerMap$$={};($JSCompiler_StaticMethods_createRoutesMap$self$$.options.$routes$||[]).map($routeItem$$=>{$routerMap$$[$routeItem$$.id]=$routeItem$$});return $routerMap$$}
function $JSCompiler_StaticMethods_getRouteItem$$($JSCompiler_StaticMethods_getRouteItem$self$$,$pageId$jscomp$1$$){let $routeItem$jscomp$1$$=$JSCompiler_StaticMethods_getRouteItem$self$$.$g$[$pageId$jscomp$1$$];return $routeItem$jscomp$1$$?$routeItem$jscomp$1$$:($routeItem$jscomp$1$$=$JSCompiler_StaticMethods_getRouteItem$self$$.$g$[$JSCompiler_StaticMethods_getRouteItem$self$$.options.$PAGE_ID_404_ERROR$])?$routeItem$jscomp$1$$:{id:$JSCompiler_StaticMethods_getRouteItem$self$$.options.$PAGE_ID_404_ERROR$,
content:"<h3>404 - Page not found: "+$pageId$jscomp$1$$+"</h3>"}}
function $JSCompiler_StaticMethods_navigateUrl$$($JSCompiler_StaticMethods_navigateUrl$self$$,$content_url$jscomp$24$$,$mustAnimateByCode$$){let $urlObject$$=$blueRouter$utils$analizeUrl$$($content_url$jscomp$24$$,$JSCompiler_StaticMethods_navigateUrl$self$$.options),$currentPageId$$=$JSCompiler_StaticMethods_updateStack$$($JSCompiler_StaticMethods_navigateUrl$self$$,$urlObject$$.page);$currentPageId$$!=$urlObject$$.page&&($content_url$jscomp$24$$=$JSCompiler_StaticMethods_getContentForRoute$$($JSCompiler_StaticMethods_getRouteItem$$($JSCompiler_StaticMethods_navigateUrl$self$$,
$urlObject$$.page)),$content_url$jscomp$24$$ instanceof Promise?$content_url$jscomp$24$$.then(function($text$jscomp$12$$){$JSCompiler_StaticMethods_getRouteItem$$($JSCompiler_StaticMethods_navigateUrl$self$$,$urlObject$$.page).content=$text$jscomp$12$$;$JSCompiler_StaticMethods_doPageTransition$$($JSCompiler_StaticMethods_navigateUrl$self$$,$text$jscomp$12$$,$urlObject$$.page,$currentPageId$$,$urlObject$$,$mustAnimateByCode$$)}):$JSCompiler_StaticMethods_doPageTransition$$($JSCompiler_StaticMethods_navigateUrl$self$$,
$content_url$jscomp$24$$,$urlObject$$.page,$currentPageId$$,$urlObject$$,$mustAnimateByCode$$))}
function $JSCompiler_StaticMethods_updateStack$$($JSCompiler_StaticMethods_updateStack$self$$,$pageId$jscomp$2$$){if($JSCompiler_StaticMethods_updateStack$self$$.stack[$JSCompiler_StaticMethods_updateStack$self$$.stack.length-2]==$pageId$jscomp$2$$)return $JSCompiler_StaticMethods_updateStack$self$$.stack.pop();var $currentPageId$jscomp$1$$=$JSCompiler_StaticMethods_updateStack$self$$.stack[$JSCompiler_StaticMethods_updateStack$self$$.stack.length-1];$JSCompiler_StaticMethods_updateStack$self$$.stack.push($pageId$jscomp$2$$);
return $currentPageId$jscomp$1$$}
function $JSCompiler_StaticMethods_getContentForRoute$$($routeItem$jscomp$4$$){if($routeItem$jscomp$4$$.$keepAlive$){var $alivePage_content$jscomp$1_url$jscomp$25$$=document.getElementById($routeItem$jscomp$4$$.id);if($alivePage_content$jscomp$1_url$jscomp$25$$)return $alivePage_content$jscomp$1_url$jscomp$25$$}return($alivePage_content$jscomp$1_url$jscomp$25$$=$routeItem$jscomp$4$$.content)?$alivePage_content$jscomp$1_url$jscomp$25$$:($alivePage_content$jscomp$1_url$jscomp$25$$=$routeItem$jscomp$4$$.url)?
$blueRouter$htmlFetcher$loadUrl$$($alivePage_content$jscomp$1_url$jscomp$25$$):'<div id="error">No content found for route from path '+$routeItem$jscomp$4$$.id+"</div>"}
function $JSCompiler_StaticMethods_doPageTransition$$($JSCompiler_StaticMethods_doPageTransition$self$$,$content$jscomp$2$$,$nextPageId$$,$currentPageId$jscomp$2$$,$urlObject$jscomp$1$$,$mustAnimateByCode$jscomp$1$$){const $mustAnimateOut$$=$mustAnimateByCode$jscomp$1$$&&!!$JSCompiler_StaticMethods_doPageTransition$self$$.options.$animationOut$,$mustAnimateIn$$=$mustAnimateByCode$jscomp$1$$&&!!$JSCompiler_StaticMethods_doPageTransition$self$$.options.$animationIn$,$initEvent$$=$content$jscomp$2$$ instanceof
HTMLElement?$blueRouter$defaultOptions$$.$EVENT_REINIT$:$blueRouter$defaultOptions$$.$EVENT_INIT$;$JSCompiler_StaticMethods_runEvent$$($JSCompiler_StaticMethods_doPageTransition$self$$,$blueRouter$defaultOptions$$.$EVENT_BEFORE_OUT$,$currentPageId$jscomp$2$$,{});let $currentPage$$=document.getElementsByClassName("currentPage")[0],$newPage$$=$JSCompiler_StaticMethods_addNextPage$$($currentPage$$,$content$jscomp$2$$,$nextPageId$$);$JSCompiler_StaticMethods_runRenderRelated$$($JSCompiler_StaticMethods_doPageTransition$self$$,
$initEvent$$,$nextPageId$$,$urlObject$jscomp$1$$);let $currentPageAnimationendListener$$=()=>{$currentPage$$.removeEventListener("animationend",$currentPageAnimationendListener$$);$newPage$$.classList.remove("hidden");$mustAnimateIn$$&&$newPage$$.classList.add($JSCompiler_StaticMethods_doPageTransition$self$$.options.$animationIn$);let $currentRoute$jscomp$inline_7$$=$JSCompiler_StaticMethods_getRouteItem$$($JSCompiler_StaticMethods_doPageTransition$self$$,$currentPageId$jscomp$2$$);$currentRoute$jscomp$inline_7$$&&
$currentRoute$jscomp$inline_7$$.$keepAlive$?($currentPage$$.removeAttribute("class"),$currentPage$$.classList.add("page"),$currentPage$$.classList.add("alive")):$currentPage$$.remove();$JSCompiler_StaticMethods_runEvent$$($JSCompiler_StaticMethods_doPageTransition$self$$,$blueRouter$defaultOptions$$.$EVENT_AFTER_OUT$,$currentPageId$jscomp$2$$,{});$mustAnimateIn$$||$newPageAnimationendListener$$()},$newPageAnimationendListener$$=()=>{$newPage$$.removeEventListener("animationend",$newPageAnimationendListener$$);
$newPage$$.classList.remove("nextPage");$newPage$$.classList.add("currentPage");$mustAnimateIn$$&&$newPage$$.classList.remove($JSCompiler_StaticMethods_doPageTransition$self$$.options.$animationIn$);$JSCompiler_StaticMethods_runEvent$$($JSCompiler_StaticMethods_doPageTransition$self$$,$initEvent$$,$nextPageId$$,$urlObject$jscomp$1$$);$JSCompiler_StaticMethods_runEvent$$($JSCompiler_StaticMethods_doPageTransition$self$$,$blueRouter$defaultOptions$$.$EVENT_MOUNTED$,$nextPageId$$,$urlObject$jscomp$1$$)};
$mustAnimateOut$$&&$currentPage$$.addEventListener("animationend",$currentPageAnimationendListener$$);$mustAnimateIn$$&&$newPage$$.addEventListener("animationend",$newPageAnimationendListener$$);$mustAnimateOut$$?$currentPage$$.classList.add($JSCompiler_StaticMethods_doPageTransition$self$$.options.$animationOut$):$currentPageAnimationendListener$$()}
function $JSCompiler_StaticMethods_runRenderRelated$$($JSCompiler_StaticMethods_runRenderRelated$self$$,$initEvent$jscomp$1_routeProperty$$,$nextPageId$jscomp$1$$,$routeItem$jscomp$5_urlObject$jscomp$2$$){$JSCompiler_StaticMethods_runEvent$$($JSCompiler_StaticMethods_runRenderRelated$self$$,$initEvent$jscomp$1_routeProperty$$===$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$EVENT_INIT$?$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$EVENT_PRE_INIT$:$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$EVENT_PRE_REINIT$,
$nextPageId$jscomp$1$$,$routeItem$jscomp$5_urlObject$jscomp$2$$);$routeItem$jscomp$5_urlObject$jscomp$2$$=$JSCompiler_StaticMethods_getRouteItem$$($JSCompiler_StaticMethods_runRenderRelated$self$$,$nextPageId$jscomp$1$$);const $renderOption$$=$initEvent$jscomp$1_routeProperty$$===$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$EVENT_INIT$?$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$RUN_RENDER_BEFORE_EVENT_INIT$:$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$RUN_RENDER_BEFORE_EVENT_REINIT$;
$initEvent$jscomp$1_routeProperty$$=$initEvent$jscomp$1_routeProperty$$===$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$EVENT_INIT$?"runRenderBeforeInit":"runRenderBeforeReinit";(void 0===$routeItem$jscomp$5_urlObject$jscomp$2$$[$initEvent$jscomp$1_routeProperty$$]?$renderOption$$:$routeItem$jscomp$5_urlObject$jscomp$2$$[$initEvent$jscomp$1_routeProperty$$])&&$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$renderFunction$&&$blueRouter$utils$isFunction$$($JSCompiler_StaticMethods_runRenderRelated$self$$.options.$renderFunction$)&&
$JSCompiler_StaticMethods_runRenderRelated$self$$.options.$renderFunction$({id:$nextPageId$jscomp$1$$,el:document.getElementById($nextPageId$jscomp$1$$)})}
function $JSCompiler_StaticMethods_addNextPage$$($currentPage$jscomp$1$$,$content$jscomp$3$$,$nextPageId$jscomp$2$$){$content$jscomp$3$$ instanceof HTMLElement?($currentPage$jscomp$1$$.insertAdjacentElement("afterend",$content$jscomp$3$$),$content$jscomp$3$$.classList.add("nextPage"),$content$jscomp$3$$.classList.add("hidden"),$content$jscomp$3$$.classList.remove("alive")):$currentPage$jscomp$1$$.insertAdjacentHTML("afterend",'<div class="nextPage hidden page" id="'+$nextPageId$jscomp$2$$+'">'+$content$jscomp$3$$+
"</div>");return document.getElementById($nextPageId$jscomp$2$$)}
function $JSCompiler_StaticMethods_runEvent$$($JSCompiler_StaticMethods_runEvent$self_page$$,$eventId$$,$pageId$jscomp$5$$,$event$jscomp$6_urlObject$jscomp$3$$){$eventId$$==$blueRouter$defaultOptions$$.$EVENT_INIT$&&$JSCompiler_StaticMethods_addEventListenersForLinks$$($JSCompiler_StaticMethods_runEvent$self_page$$,$pageId$jscomp$5$$);if($JSCompiler_StaticMethods_runEvent$self_page$$=$JSCompiler_StaticMethods_runEvent$self_page$$.options.$eventsByPage$[$pageId$jscomp$5$$])if($event$jscomp$6_urlObject$jscomp$3$$={$params$:$event$jscomp$6_urlObject$jscomp$3$$.$params$||
{}},$JSCompiler_StaticMethods_runEvent$self_page$$[$eventId$$]&&$blueRouter$utils$isFunction$$($JSCompiler_StaticMethods_runEvent$self_page$$[$eventId$$]))$JSCompiler_StaticMethods_runEvent$self_page$$[$eventId$$]($event$jscomp$6_urlObject$jscomp$3$$)};var $blueRouter$defaultOptions$$={$updateOnLoad$:!0,$preloadPagesOnLoad$:!1,$animationOut$:"slide-out-top",$animationIn$:"scale-in-center",$animateTransitionsOnLoad$:!1,$PAGE_PREFIX$:"!",$PAGE_ID_HOME$:"[home]",$PAGE_ID_404_ERROR$:"[404]",$EVENT_PRE_INIT$:"preInit",$EVENT_INIT$:"init",$EVENT_PRE_REINIT$:"preReinit",$EVENT_REINIT$:"reinit",$EVENT_MOUNTED$:"mounted",$EVENT_BEFORE_OUT$:"beforeOut",$EVENT_AFTER_OUT$:"afterOut",$RUN_RENDER_BEFORE_EVENT_INIT$:!0,$RUN_RENDER_BEFORE_EVENT_REINIT$:!1};function $blueRouter$htmlFetcher$loadAllUrls$$($router$jscomp$1$$,$callback$jscomp$58$$){let $pending$$=0;($router$jscomp$1$$.options.$routes$||[]).map($routeItem$jscomp$6$$=>{let $url$jscomp$26$$=$routeItem$jscomp$6$$.url;$url$jscomp$26$$&&(++$pending$$,$blueRouter$htmlFetcher$loadUrl$$($url$jscomp$26$$).then(function($text$jscomp$13$$){$routeItem$jscomp$6$$.content=$text$jscomp$13$$;0==--$pending$$&&$callback$jscomp$58$$&&$blueRouter$utils$isFunction$$($callback$jscomp$58$$)&&$callback$jscomp$58$$()}))})}
async function $blueRouter$htmlFetcher$loadUrl$$($message$jscomp$40_url$jscomp$27$$){const $response$jscomp$2$$=await fetch($message$jscomp$40_url$jscomp$27$$);if(!$response$jscomp$2$$.ok)throw $message$jscomp$40_url$jscomp$27$$=`Error fetching ${$message$jscomp$40_url$jscomp$27$$} has occured: ${$response$jscomp$2$$.status}`,alert($message$jscomp$40_url$jscomp$27$$),Error($message$jscomp$40_url$jscomp$27$$);return await $response$jscomp$2$$.text()};function $blueRouter$utils$analizeUrl$$($i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$,$options$jscomp$68_paramsString_vars$$){let $result$jscomp$1$$={};$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$=$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$.split($options$jscomp$68_paramsString_vars$$.$PAGE_PREFIX$);$result$jscomp$1$$.$prepage$=$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$[0];$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$=$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$[1]||
"";$result$jscomp$1$$.$prepage$.endsWith("#")&&($result$jscomp$1$$.$prepage$=$result$jscomp$1$$.$prepage$.slice(0,-1));$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$=$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$.split("?");$result$jscomp$1$$.page=$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$[0];""==$result$jscomp$1$$.page&&($result$jscomp$1$$.page=$options$jscomp$68_paramsString_vars$$.$PAGE_ID_HOME$);$options$jscomp$68_paramsString_vars$$=$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$[1]||
"";$result$jscomp$1$$.$params$={};if(""==$options$jscomp$68_paramsString_vars$$)return $result$jscomp$1$$;$options$jscomp$68_paramsString_vars$$=$options$jscomp$68_paramsString_vars$$.split("&");for($i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$=0;$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$<$options$jscomp$68_paramsString_vars$$.length;$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$++){let $pair$$=$options$jscomp$68_paramsString_vars$$[$i$jscomp$3_pathParts_postPath_url$jscomp$28_urlParts$$].split("=");
$result$jscomp$1$$.$params$[$pair$$[0]]=$pair$$[1]}return $result$jscomp$1$$}function $blueRouter$utils$addEventListenerOnList$$($list$$,$fn$$){for(let $i$jscomp$4$$=0,$len$$=$list$$.length;$i$jscomp$4$$<$len$$;$i$jscomp$4$$++)$list$$[$i$jscomp$4$$].addEventListener("click",$fn$$,!1)}
function $blueRouter$utils$extend$$($out$$,$from1$$,$from2$$){$out$$=$out$$||{};for(var $i$jscomp$5$$=1;$i$jscomp$5$$<arguments.length;$i$jscomp$5$$++)if(arguments[$i$jscomp$5$$])for(var $key$jscomp$39$$ in arguments[$i$jscomp$5$$])arguments[$i$jscomp$5$$].hasOwnProperty($key$jscomp$39$$)&&($out$$[$key$jscomp$39$$]=arguments[$i$jscomp$5$$][$key$jscomp$39$$])}
function $blueRouter$utils$isFunction$$($obj$jscomp$29$$){return"function"===typeof $obj$jscomp$29$$&&"number"!==typeof $obj$jscomp$29$$.nodeType};new function(){this.options={};$blueRouter$utils$extend$$(this.options,$blueRouter$defaultOptions$$,{$eventsByPage$:{},$routes$:[{id:"[home]",content:'\n<h1>Blue router sample</h1>\n\n<div class="page-content">\n    <h3>Home page</h3>\n    <p>\n        This is the Home page\n    </p>\n\n    <ul id="home_links">\n        <li>\n            <a href="!links">Links</a>. Go to links page.\n        </li>\n        <li>\n            <a href="!textWriter">Text writer</a>. Go to text writer.\n        </li>\n        <li>\n            <a href="!textWriter?text1=copyThis">Text writer</a>. Go to text writer using 1 parameter.\n        </li>\n        <li>\n            <a href="!textWriter?text1=copyThis&text2=copyThisToo2">Text writer</a>. Go to text writer using 2 parameters.\n        </li>\n    </ul>\n</div>\n'},
{id:"links",content:'\n<h1>Blue router sample</h1>\n\n<div>\n    <a href="!">Home</a>\n</div>\n\n<div class="page-content">\n    <h3>Links page</h3>\n    <p>\n        This is the links page\n    </p>\n\n    <ul>\n        <li>\n            <a href="https://github.com/davidcana/blueRouter">Blue router</a>.\n            A simple router component to make it easy build Single Page Applications.\n        </li>\n        <li>\n            <a href="https://davidcana.github.io/ZPT-JS/">ZPT-JS</a>.\n            Zenon Page Templates - JS (ZPT-JS) is a Javascript implementation of Zope Page Templates (ZPT).\n        </li>\n        <li>\n            <a href="https://github.com/davidcana/ZPT-Java">ZPT-Java</a>.\n            JPT is a Java implementation of Zope Page Templates (ZPT).\n        </li>\n        <li>\n            <a href="https://github.com/davidcana/zzDOM">zzDOM</a>.\n            A tiny javascript API that implements only the DOM functions of jquery including chaining.\n        </li>\n    </ul>\n</div>\n'},
{id:"textWriter",$keepAlive$:!0,content:'\n<h1>Blue router sample</h1>\n\n<div>\n    <a href="!">Home</a>\n</div>\n\n<div class="page-content">\n    <h3>Text writer page</h3>\n    <p>\n        This is the text writer page. Write text and click \'Add text\' button or press \'Enter\' to add text.\n    </p>\n\n    <div class="field">\n        <div>Text</div>\n        <div>\n            <input type="text" id="textWriter_textToAdd" name="textWriter_textToAdd" required>\n            <button id="textWriter_addTextButton">Add text</button>\n        </div>\n    </div>\n\n    <div class="field">\n        <div>History</div>\n        <div id="textWriter_history"></div>\n    </div>\n</div>\n'},
{id:"[404]",content:'\n<h1>Blue router sample</h1>\n\n<div>\n    <a href="!">Home</a>\n</div>\n\n<div class="page-content">\n    <h3>404 page</h3>\n    <p>\n        Sorry\n    </p>\n    <p>\n        Requested content not found.\n    </p>\n</div>\n'}]});$JSCompiler_StaticMethods_checkOptions$$(this);if(this.options.$preloadPagesOnLoad$){let $self$jscomp$1$$=this;$blueRouter$htmlFetcher$loadAllUrls$$(this,()=>{$JSCompiler_StaticMethods_init$$($self$jscomp$1$$)})}else $JSCompiler_StaticMethods_init$$(this)};
}).call(this)
//# sourceMappingURL=sample.gcc.js.map
